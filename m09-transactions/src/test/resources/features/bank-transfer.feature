Feature: 銀行轉帳交易
  驗證多文件交易在銀行轉帳場景中的原子性行為

  Scenario: 成功轉帳
    Given 帳戶 "A001" 餘額 50000 元
    And 帳戶 "A002" 餘額 10000 元
    When 從 "A001" 轉帳 20000 元至 "A002"
    Then "A001" 餘額為 30000 元
    And "A002" 餘額為 30000 元
    And 產生一筆轉帳記錄

  Scenario: 餘額不足轉帳失敗
    Given 帳戶 "A001" 餘額 5000 元
    And 帳戶 "A002" 餘額 10000 元
    When 從 "A001" 轉帳 20000 元至 "A002"
    Then 轉帳失敗並回傳餘額不足錯誤
    And "A001" 餘額維持 5000 元
    And "A002" 餘額維持 10000 元

  Scenario: 連續多筆轉帳
    Given 帳戶 "A001" 餘額 100000 元
    And 帳戶 "A002" 餘額 50000 元
    When 從 "A001" 轉帳 30000 元至 "A002"
    And 從 "A002" 轉帳 10000 元至 "A001"
    Then "A001" 餘額為 80000 元
    And "A002" 餘額為 70000 元
